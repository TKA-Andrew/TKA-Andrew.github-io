<div class="flexContainer">    
    <div fxLayout="column" fxLayoutGap="10px">
        <h1>TurtleBot2 Notes</h1>
        <div>
            <h2>Introduction</h2>
            <p>This page documents some notes I jotted when I played with TurtleBot2 during my university years.</p>
            <p>These notes were also used to tramsfer knowledge to my juniors.</p>
            <p>The development environment was Ubuntu 14.04 with ROS Indigo.</p>
            <mat-divider></mat-divider>
        </div>
        <div>
            <h2>Simultaneous Localization & Mapping (SLAM) using gmapping</h2>
            <ol>
                <li>Run the following commands in your terminal:</li>
                    <ul>
                        <li><span class="CLI-font">roslaunch turtlebot_bringup minimal.launch</span></li>
                        <li><span class="CLI-font">roslaunch turtlebot_navigation gmapping_demo.launch</span></li>
                        <li><span class="CLI-font">roslaunch turtlebot_rviz_launchers view_navigation.launch</span></li>
                    </ul>
                    <br>
                    <b>OR</b>
                    Simply create a .launch file with the following content and then roslaunch it:
                    <pre>
                        <code>
    &lt;launch>
        &lt;include file="$(find turtlebot_bringup)/launch/minimal.launch" />
        &lt;include file="$(find turtlebot_navigation)/launch/gmapping_demo.launch" />
        &lt;include file="$(find turtlebot_rviz_launchers)/launch/view_navigation.launch"/>
    &lt;/launch>
                        </code>
                    </pre>
                <li>You should see that RVIZ is opened, you can now navigate your turtlebot around the
                    unknown map using the keyboard teleoperation.</li>
                    <ul>
                        <li><span class="CLI-font">roslaunch turtlebot_teleop keyboard_teleop.launch</span></li>
                    </ul>
                    <p style="font-style: italic;">Side Note: If you have another computer and WiFi connection, 
                        you can control your robot remotely by running keyboard_teleop on the second computer. 
                        Refer to this <a href="http://learn.turtlebot.com/2015/02/01/7/" target="_blank" rel="noopener noreferrer">tutorial</a> regarding this.</p>
                <li>Navigate the turtlebot around and you should see the map is generated on RVIZ at the same time.</li>
                <li>Once you’re done building a map, save it with the following command:</li>
                    <ul>
                        <li><span class="CLI-font">rosrun map_server map_saver -f /DIRECTORY/YOUR_FILE_NAME</span></li>
                        <li>For example: <span class="CLI-font">rosrun map_server map_saver -f /home/tka-andrew/my_map</span></li>
                    </ul>
            </ol>
            <mat-divider></mat-divider>
        </div>

        <div>
            <h2>Getting position and orientation of robot</h2>
            <ol>
                <li>Run the following commands in your terminal:</li>
                    <ul>
                        <li><span class="CLI-font">roslaunch turtlebot_bringup minimal.launch</span></li>
                        <li><span class="CLI-font">roslaunch turtlebot_navigation amcl_demo.launch
                            map_ file:=/DIRECTORY/YOUR_FILE_NAME.yaml</span></li>
                        <li><span class="CLI-font">roslaunch turtlebot_rviz_launchers view_navigation.launch</span></li>
                    </ul>
                <li>Your map will come up on the screen, you should calibrate the current position of
                    Turtlebot by selecting 2D pose estimate on the upper tab.</li>
                <li>Using keyboard_teleop, you can freely navigate your turtlebot around the map to any
                    position in the map. This will furher make the position and orientation more accurate.</li>
                <li>Navigate your turtlebot to your desired spot, and run the command below to obtain your
                    Turtlebot’s current pose information.</li>
                    <ul>
                        <li><span class="CLI-font">rostopic echo /amcl_pose</span></li>
                    </ul>
                <li>Then you will see something like this:</li>
                    <pre>
    header:
      seq: 81
        stamp:
      secs: 1839
      nsecs: 212000000
      frame_id: map

    pose:
      pose:
      position:
        x: -7.76006046064
        y: -1.15741912051
        z: 0.0
      orientation:
        x: 0.0
        y: 0.0
        z: 0.841545398193
        w: 0.540186396331
      covariance: [0.0026612296465486907, -0.0006793180004436294, 0.0, 0.0, 0.0, 0.0,
        -0.0006793180004454058, 0.003341409476325552, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
        0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
        0.0012125460173182706]
                    </pre>
                <li>Take note of the position: x, y, z and the orientation x, y, z, w information.</li>
            </ol>
        </div>

        <div>
            <h2>Setting initial position in launch file</h2>
            <ol>
                <li>From the previous section you already know how to get the orientation and position of robot. 
                    Now you </li>
                <li>Copy the amcl_demo.launch in opt/ros/indigo/share/turtlebot_navigation/launch</li>
                <li>If you look at the launch file, there are three lines that defined the initial pose:</li>
                    <pre>
                        <code>
    &lt;arg name="initial_pose_x" default="0.0"/>
    &lt;arg name="initial_pose_y" default="0.0"/>
    &lt;arg name="initial_pose_a" default="0.0"/>  
                        </code>
                    </pre>
                <li>To set the value of initial_pose_x and initial_pose_y, refer to the pose.position.x and pose.position.y.</li>
                <li>To set the value of initial_pose_a, refer to the section “How to get initial_pose_a from
                    quaternion” below</li>
            </ol>
        </div>
        
    </div>
</div>